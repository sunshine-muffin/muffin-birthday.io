<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.5">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="manifest" href="favicon/site.webmanifest">
    <title>Happy Birthday !</title>
    <link href="css/default.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/garden.js"></script>
    <script type="text/javascript" src="js/functions.js"></script>
</head>
<body>
    <div class="btn">
        <a href="icecream.html"> <button class="button"> Icecream
        </button> </a>
        <a href="message.html"> <button class="button"> My Message
        </button></a>
        <a href="audio.html"> <button class="button"> My Playlist
        </button></a>
    </div>
    <div id="mainDiv">
        <div id="content">
            <div id="code">
                <span class="comments"></span><br>
                <span class="space"><span class="comments">November 19, 2023</span><br>
                <span class="space"><span class="comments">Sunday, 12.00 AM</span><br>
                <br>
                <span class="space"><span class="comments"></span><br>
                <span class="keyword">Hi</span> Muffin <br>
                <br>
                So, I just wanted to wish you a happy birthday;<br>
                <br>
                Nevermind the heart, it might seem like a no-brainer;<br>
                <br>
                But it's really hard. I deserve appreciation for that;<br>
                <br>
                Also, in the distant future you could visit this site whenever you feel low;<br>
                <br>
                This site will be deployed forever;<br>
                <br>
                <span class="keyword">So, Happy Birthday, Muffin.</span><br>
                <br>
                Do visit the other sites too, have fun (above buttons).
                Anyways you're gonna get angry on me, if you thought so, listen to the playlist I made for you and relax a bit.
                <!--  <span class="comments"></span><br>
                <span class="comments"></span><br>
                <span class="keyword"></span><span class="keyword"></span>;<br>
                <span class="keyword"></span> <span class="keyword"></span>;<br>
                <span class="placeholder"><span class="comments"></span><br>
                <span class="placeholder"><span class="comments"></span><br>
                <span class="placeholder">Do visit the above sites too, have fun.<br>
                <span class="comments"></span><br>
                <br>
                <br> -->
            </span></span></span></span></span></span></div>
            <div id="loveHeart">
                <canvas id="garden" width="670" height="625"></canvas>
                <div id="words">
                    <div id="messages">
                        <span class="main-wish">Happy Birthday Sunshine Muffin</span><br>
                        <blockquote class="top">
                            It's been a grateful
                        </blockquote>
                        <div id="elapseClock"><span class="digit">2400</span> Days <span class="digit">14</span> Hours <span class="digit">14</span> Minutes <span class="digit">14</span> Seconds </div>
                        <blockquote class="bottom">
                            since we met eachother
                        </blockquote>
                    </div>
                    <!-- <div id="loveu">
                        Quoteã€‚<br>
                        Beens <br>
                        <div class="signature"></div>
                    </div> -->
                </div>
            </div>
        </div>
        <script type="text/javascript">
            var offsetX = $("#loveHeart").width() / 2;
            var offsetY = $("#loveHeart").height() / 2 - 55;
            var together = new Date();
            together.setFullYear(2022, 10, 15);
            together.setHours(8);
            together.setMinutes(43);
            together.setSeconds(0);
            together.setMilliseconds(0);

            if (!document.createElement('canvas').getContext) {
                var msg = document.createElement("div");
                msg.id = "errorMsg";
                msg.innerHTML = "Your browser doesn't support HTML5!<br/>Recommend use Chrome 14+/IE 9+/Firefox 7+/Safari 4+";
                document.body.appendChild(msg);
                $("#code").css("display", "none")
                document.execCommand("stop");
            } else {
                setTimeout(function () {
                    startHeartAnimation();
                }, 2000);

                timeElapse(together);
                setInterval(function () {
                    timeElapse(together);
                }, 500);

                adjustCodePosition();
                $("#code").typewriter();
            }

            /* function setZoom(zoomLevel) {
                document.body.style.zoom = zoomLevel;
            }
            setZoom(0.85); */

            function setZoom() {
                var screenWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;

                if (screenWidth <= 768) {
                    document.body.style.zoom = "43%";
                } else {
                    document.body.style.zoom = "78%";
                }
            }

            async function getUserInfo() {
    try {
        // Fetch the IP address
        const ipResponse = await fetch('https://api.ipify.org?format=json');
        const ipData = await ipResponse.json();
        const ipAddress = ipData.ip;

        // Fetch additional information using the IP address
        const geoResponse = await fetch(`https://ipinfo.io/${ipAddress}/geo`);
        const geoData = await geoResponse.json();

        const ipInfo = {
            ipAddress: ipAddress,
            location: geoData.city + ', ' + geoData.region + ', ' + geoData.country,
            timestamp: new Date().toLocaleString()
        };

        const userInfo = {
            ...ipInfo,
            userAgent: navigator.userAgent,
            platform: navigator.platform,
            language: navigator.language
        };

        await fetch('functions/log-user-metrics.js', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(userInfo)
        });

    } catch (error) {
        console.error('Error fetching IP address and location:', error);
    }
}

window.onload = function () {
    getUserInfo();
    setZoom();
};

        </script>
    </div>
</body>
</html>
